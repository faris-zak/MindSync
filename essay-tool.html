<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-N3VFF4P2GY"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-N3VFF4P2GY');
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="أفضل تجربة من مايندسينك لكتابة المقالات والنصوص.">
        <meta name="author" content="Al-Faris Mujahid AlZakwani, الفارس بن مجاهد الزكواني">
        <meta name="keywords" content="MindSync, mindsync, education, academic, summaries, مايندسينك, ملخصات, ملخصات مسايندسينك, تعليم, أكاديمي, تعليم أكاديمي, عمان, مقال، كتابة، كتابة مقال، مذاكره">
        <title>كتابة مقال | MindSync</title>
        <link rel="icon" href="assets/images/mindsync-icon.png">
        <link rel="manifest" href="manifest.json">
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Carlito:ital,wght@0,400;0,700;1,400;1,700&family=Harmattan:wght@400;500;600;700&family=Rubik:ital,wght@0,300..900;1,300..900&family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
        <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-brands/css/uicons-brands.css'>
        <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
        <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css'>
        <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
        <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
        <style>


.essayToolSection {
    background-color: #ffffff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

h1, h3 {
    color: #14213D;
}

h1{
    font-size: 50px;
    font-weight: 600;
    margin: 20px auto;
}

h3, label{
    font-size: 24px;
    font-weight: 600;
    margin: 20px auto;
}

label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
}

input[type="text"], textarea {
    width: 80%;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid #ced4da;
    border-radius: 4px;
}

button {
    background-color: #FCA311;
    color: #fff;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-right: 10px;
}

button:hover {
    background-color: #e38c00;
}

.return {
    margin: 0;
    margin-top: 20px;
    background-color: #6c757d;
}

.return:hover {
    background-color: #5a6268;
}

small {
    display: block;
    margin-top: 10px;
    font-size: 0.9em;
}

#saveNotification{
    color: rgb(29, 161, 29);
    font-weight: bold;
    font-size: 14px;
}

#fileHistory {
    margin-top: 20px;
    padding-left: 0;
}

#fileHistory li {
    background-color: #f1f1f1;
    margin-bottom: 5px;
    padding: 10px;
    border-radius: 4px;
}

ul{
    padding: 0;
}

@media (max-width: 768px) {
    .essayToolSection {
        padding: 15px;
    }

    input[type="text"], textarea {
        font-size: 1em;
    }
}
        </style>
    </head>
    <body>
        <main>
            <section>
                <div class="essayToolSection" id="essayTool">
                    <div class="pomodoroSectionDetails">
                    
                    <h1>كتابة مقال</h1>
                    <p>اكتب، احفظ، ادرج.</p>
                    <hr>
                    <label for="essayTitle">عنوان المقال:</label>
                    <input type="text" name="essayTitle" id="titleInput" placeholder="اكتب عنوان المقال" />
                    
                    <label for="essayContent">محتوى المقال:</label>
                    <textarea id="essayInput" name="essayContent" rows="10" cols="50" oninput="updateCounts()" spellcheck="true"></textarea>
                    <h3>الأخطاء الإملائية:</h3>
                    <ul id="errorList" style="list-style: none; color: red;"></ul>
                    <hr>
                    <label for="selectedFile">ملف المقال:</label>
                    <p>إذا كان لديك ملف سابق يمكنك التعديل عليه، قم بإدراجه ادناه وانقر على "إدراج مقال".</p>
                    <input type="file" name="selectedFile" id="fileInput" accept=".txt" /><br><br>
                    <button onclick="uploadFile()">إدراج مقال</button>
                    <hr>
                    <div>
                        <h3>معلومات المقال:</h3>
                        <small>أسم المقال: <span id="fileName"></span></small>
                        <small>حجم المقال: <span id="fileSize">0</span> بايت</small>
                        <small>عدد الكلمات: <span id="wordCount">0</span></small>
                        <small>عدد الحروف: <span id="letterCount">0</span></small>
                    </div>
                    <br>
                    <button onclick="saveEssay()">حفظ المقال</button>
                    <button onclick="reset()">إعادة ضبط</button>
                    <p id="saveNotification"></p>

                    <hr>
                    <h3>سجل المقالات</h3>
                    <ul id="fileHistory" style="list-style: none;">
                        <li>سجل مقالاتك فارغ.</li>
                    </ul>
                    <button onclick="resetHistory()">إعادة ضبط السجل</button>
                </div>
            </div>

                <!-- <div class="noteSection">
                    <div class="noteSectionDetails" title="Notes">
                        <p class="noteTitle">ملاحظات:</p>
                        <ul class="noteList">
                            <li>سيتم إصدار نغمات خفيفه عند إنتهاء المؤقت، يمكنك إطفائها بالضغط على إيقاف.</li>
                            <li>العمل لمدة 25 دقيقة يبدو أقل تهديدًا وأقل إرهاقًا مقارنة بفترات زمنية أطول.</li>
                            <li>الفترات القصيرة من العمل تتخللها استراحات تسمح بالحركة والتمدد، مما يحسن الصحة العامة.</li>
                        </ul>
                    </div>
                </div> -->

                <a href="services-and-tools.html"><button class="return" role="button" title="Back Services and Tools">رجوع إلى خدمات وأدوات <span>&#8592;</span></button></a>
            </section>
        </main>

        <footer>
            <div class="copyright" title="All rights reserved &copy; MindSync 2024">
                <p>جميع الحقوق محفوظة &copy; مايندسينك 2024</p>
            </div>
        </footer>

        <script src="assets/js/languageTool.js"></script>
        <script>
            let fileHistory = [];

            function loadHistory() {
                const history = localStorage.getItem('fileHistory');
                if (history) {
                    fileHistory = JSON.parse(history);
                    displayHistory();
                }
            }

            function displayHistory() {
                const historyList = document.getElementById('fileHistory');
                historyList.innerHTML = '';
                fileHistory.forEach(file => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `المقال: ${file.title}, الحجم: ${file.size} بايت, التاريخ: ${file.date}`;
                    historyList.appendChild(listItem);
                });

                historyList.innerHTML = '';

                if (fileHistory.length === 0) {
                    const emptyMessage = document.createElement('li');
                    emptyMessage.textContent = "سجل مقالاتك فارغ.";
                    historyList.appendChild(emptyMessage);
                } else {
                    fileHistory.forEach(file => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `المقال: ${file.title}, الحجم: ${file.size} بايت, التاريخ: ${file.date}`;
                        historyList.appendChild(listItem);
                });
                }
            }

            function addToHistory(title, size) {
                const now = new Date();
                const date = now.toLocaleString();
                const fileDetails = { title, size, date };
                fileHistory.push(fileDetails);
                localStorage.setItem('fileHistory', JSON.stringify(fileHistory));
                displayHistory();
            }

            function updateCounts() {
                const text = document.getElementById("essayInput").value;
                const wordCount = text.trim().split(/\s+/).filter(Boolean).length;
                const letterCount = text.replace(/\s+/g, '').length;

                document.getElementById("wordCount").textContent = wordCount;
                document.getElementById("letterCount").textContent = letterCount;

                // Update file size approximation
                const blob = new Blob([text], { type: "text/plain" });
                document.getElementById("fileSize").textContent = blob.size;

                // Update file name based on title input
                const titleInput = document.getElementById("titleInput").value.trim();
                const defaultFileName = "بدون عنوان";
                document.getElementById("fileName").textContent = titleInput.length > 0 ? titleInput : defaultFileName;
            }

            // Auto-save functions
            function autoSaveEssay() {
                const essayTitle = document.getElementById('titleInput').value;
                const essayContent = document.getElementById('essayInput').value;

                localStorage.setItem('autoSavedTitle', essayTitle);
                localStorage.setItem('autoSavedContent', essayContent);
            }

            function loadAutoSavedEssay() {
                const savedTitle = localStorage.getItem('autoSavedTitle');
                const savedContent = localStorage.getItem('autoSavedContent');

                if (savedTitle) {
                    document.getElementById('titleInput').value = savedTitle;
                    document.getElementById('fileName').textContent = savedTitle; // Update file name display
                }

                if (savedContent) {
                    document.getElementById('essayInput').value = savedContent;
                    updateCounts(); // Update counts after loading
                }
            }

            // Set up auto-save to trigger every 5 seconds
            setInterval(autoSaveEssay, 5000);

            // Event listener to update the file name dynamically as the user types in the title input
            document.getElementById("titleInput").addEventListener("input", function() {
                const titleInput = document.getElementById("titleInput").value.trim();
                const defaultFileName = "بدون عنوان";
                document.getElementById("fileName").textContent = titleInput.length > 0 ? titleInput : defaultFileName;
            });

            function uploadFile() {
                const fileInput = document.getElementById("fileInput");
                const file = fileInput.files[0];

                if (file && file.type === "text/plain") {
                    const reader = new FileReader();

                    reader.onload = function(event) {
                        const text = event.target.result;
                        document.getElementById("essayInput").value = text;
                        updateCounts();
                    };

                    reader.readAsText(file);
                
                    const fileNameWithoutExtension = file.name.replace(/\.[^/.]+$/, "");
                    document.getElementById("titleInput").value = fileNameWithoutExtension;
                    document.getElementById("fileName").textContent = file.name;
                    document.getElementById("fileSize").textContent = file.size;

                    // Add to history
                    addToHistory(fileNameWithoutExtension, file.size);
                } else {
                    alert("يرجى إدراج ملف .txt صالح.");
                    document.getElementById("titleInput").value = "";
                    document.getElementById("fileName").textContent = "";
                    document.getElementById("fileSize").textContent = "0";
                }
            }

            function saveEssay() {
                const text = document.getElementById("essayInput").value;
                const titleInput = document.getElementById("titleInput").value.trim();
                const now = new Date();
                const formattedDate = now.toISOString().split('T')[0];
                const defaultTitle = `Essay (${formattedDate})`;
                const title = titleInput.length > 0 ? titleInput : defaultTitle;
                const blob = new Blob([text], { type: "text/plain" });
                const link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = `${title}.txt`;
                link.click();
                URL.revokeObjectURL(link.href);

                // Add to history
                addToHistory(title, blob.size);

                // Notification
                document.getElementById("saveNotification").textContent = "تم حفظ المقال في جهازك بنجاح!";
                setTimeout(() => {
                    document.getElementById("saveNotification").textContent = "";
                }, 2000);
            }

            function reset() {
                document.getElementById("essayInput").value = "";
                document.getElementById("titleInput").value = "";
                document.getElementById("fileInput").value = "";
                document.getElementById("fileName").textContent = "";
                document.getElementById("fileSize").value = "0";
                updateCounts();
            }

            function resetHistory() {
                fileHistory = [];
                localStorage.removeItem('fileHistory');
                displayHistory();
            }

            // Load history and auto-saved content on page load
            window.onload = function() {
                loadHistory();
                loadAutoSavedEssay();
            };
        </script>
    </body>
</html>